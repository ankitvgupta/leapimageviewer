
<!DOCTYPE html>
<html>

  <head>

    <title>Leap Motion Image Viewer</title>
    
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
      <script type="text/javascript" src="js/jquery-panzoom.js"></script>
      <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
      <link rel="stylesheet" href="style2.css" type="text/css" media="screen"/>
      <script type="text/javascript">
  $(document).ready(function () {
        function initPanZoom() {
          $('#pan img').panZoom({
        'zoomIn'   : $('#zoomin'),
        'zoomOut' : $('#zoomout'),
        'panUp'  :$('#panup'),
        'panDown':$('#pandown'),
        'panLeft':$('#panleft'),
        'panRight':$('#panright'),
            'fit'       :   $('#fit'),
            'destroy'   :   $('#destroy'),
            'out_x1'    :   $('#x1'),
            'out_y1'    :   $('#y1'),
            'out_x2'    :   $('#x2'),
            'out_y2'    :   $('#y2'),
            'directedit':   true,
            'debug'     :   false
          });
        };

        initPanZoom();

  // init the image switcher
  $(' img').bind('click', function () {
  $('#pan img').attr('src', $(this).attr('src'));
  });

        // init the init button (for testing destroy/recreate)
        $('#reinit').bind('click', function (event) {
          if ($('#pan img').data('panZoom')) {
            alert('Click destroy before trying to re-initialise panZoom');
            return;
          }
          event.preventDefault();
          initPanZoom();
        });

  });
  </script>
  <style>
      span.reference{
        font-family:Arial;
        position:fixed;
        right:10px;
        top:10px;
        font-size:10px;
      }
      span.reference a{
        color:#fff;
        text-transform:uppercase;
        text-decoration:none;
        text-shadow:1px 1px 1px #000;
        margin-left:20px;
      }
      span.reference a:hover{
        color:#ddd;
      }
      h1.title{
        width:919px;
        height:148px;
        position:fixed;
        top:10px;
        left:10px;
        text-indent:-9000px;
        background:transparent url(images/icons/title.png) no-repeat top left;
        z-index:2;
      }
    </style>
    <script type="text/javascript">
      $(window).load(function() {

     
        
        sliderLeft=$('#thumbScroller .container').position().left;
        padding=$('#outer_container').css('paddingRight').replace("px", "");
        sliderWidth=$(window).width()-padding;
        $('#thumbScroller').css('width',sliderWidth);
        var totalContent=0;
        $('#thumbScroller .content').each(function () {
          totalContent+=$(this).innerWidth();
          $('#thumbScroller .container').css('width',totalContent);
        });
        $('#thumbScroller').mousemove(function(e){
          if($('#thumbScroller  .container').width()>sliderWidth){
            var mouseCoords=(e.pageX - this.offsetLeft);
            var mousePercentX=mouseCoords/sliderWidth;
            var destX=-(((totalContent-(sliderWidth))-sliderWidth)*(mousePercentX));
            var thePosA=mouseCoords-destX;
            var thePosB=destX-mouseCoords;
            var animSpeed=600; //ease amount
            var easeType='easeOutCirc';
            if(mouseCoords==destX){
              $('#thumbScroller .container').stop();
            }
            else if(mouseCoords>destX){
              //$('#thumbScroller .container').css('left',-thePosA); //without easing
              $('#thumbScroller .container').stop().animate({left: -thePosA}, animSpeed,easeType); //with easing
            }
            else if(mouseCoords<destX){
              //$('#thumbScroller .container').css('left',thePosB); //without easing
              $('#thumbScroller .container').stop().animate({left: thePosB}, animSpeed,easeType); //with easing
            }
          }
        });
        $('#thumbScroller  .thumb').each(function () {
          $(this).fadeTo(fadeSpeed, 0.6);
        });
        var fadeSpeed=200;
        $('#thumbScroller .thumb').hover(
        function(){ //mouse over
          $(this).fadeTo(fadeSpeed, 1);
        },
        function(){ //mouse out
          $(this).fadeTo(fadeSpeed, 0.6);
        }
      );

      });
      
    </script>
      </head>
  
  <body>
  
    <div class="wrapper">
      <h1><img src="http://tx8.engine.flamingtext.com/netfu/tmp28000/coollogo_com-199675660.png" alt="Smiley face"></h1>



      <div id="pan">
        <img src="http://benlumley.co.uk/dev/panzoom/example/sample2.jpg">
      </div>


      

      <div id="output">
        <h2>Output</h2>
        <p>View the current co-ordinates live. You will probably want hidden fields, but whilst they are visible, try changing the numbers.</p>
        <table>
          <tr>
            <td>x1: <input type="text" name="x1" value="0" id="x1"></td><td>x2: <input type="text" name="x2" value="0" id="x2"></td>
          </tr>
          <tr>
            <td>y1: <input type="text" name="y1" value="0" id="y1"></td><td>y2: <input type="text" name="y2" value="0" id="y2"></td>
          </tr>
        </table>
      </div>

     
    </div>
        <div id="fp_gallery" class="fp_gallery">

      
      
     <div id="outer_container">
        <div id="thumbScroller">
          <div class="container">
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/1.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://scontent-a-iad.xx.fbcdn.net/hphotos-ash3/601423_10151281280786607_1290656621_n.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/3.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/4.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/5.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/6.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/7.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/8.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/9.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/10.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/11.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/12.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/13.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/14.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/15.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/16.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/17.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/18.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/19.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/20.jpg" class="thumb" /></a></div>
            </div>
            <div class="content">
              <div><a href="#"><img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/286203_10151629093801607_1595096387_o.jpg" alt="images/21.jpg" class="thumb" /></a></div>
            </div>
          </div>
        </div>
      </div>
   
    </div>
     
  <script src="js/leap.min.js"></script>


  <script>
// This is the starting of the Leap Motion script
    var frame;
    // Global keyTap and screenTap arrays
    var keyTaps = [];
    var KEYTAP_LIFETIME   =  .5;
    var KEYTAP_START_SIZE = 15;

    var circleTimes = [];

    var screenTaps = [];
    var SCREENTAP_LIFETIME   = 1;
    var SCREENTAP_START_SIZE = 30;
    currentImage = 0;
    
    var images = [
    "http://benlumley.co.uk/dev/panzoom/example/sample.jpg",
    "http://benlumley.co.uk/dev/panzoom/example/sample2.jpg",
    "http://benlumley.co.uk/dev/panzoom/example/sample3.jpg"
];

      //for(int t= 0; t < images.length; t++)
         //       {

                 
                  //$('"#thumbScroller .container"').append( "<div class=\"content\"><div><a href=\"#\"><img src=\"" + images[t] + "\" class =\"thumb\"/></a></div></div>" );
           //     }
    
    

    /*
      
      The leapToScene function takes a position in leap space 
      and converts it to the space in the canvas.
      
      It does this by using the interaction box, in order to 
      make sure that every part of the canvas is accesible 
      in the interaction area of the leap

    */

    function leapToScene( leapPos ){

      // Gets the interaction box of the current frame
      var iBox = frame.interactionBox;

      // Gets the left border and top border of the box
      // In order to convert the position to the proper
      // location for the canvas
      var left = iBox.center[0] - iBox.size[0]/2;
      var top = iBox.center[1] + iBox.size[1]/2;

      // Takes our leap coordinates, and changes them so
      // that the origin is in the top left corner 
      var x = leapPos[0] - left;
      var y = leapPos[1] - top;

      // Divides the position by the size of the box
      // so that x and y values will range from 0 to 1
      // as they lay within the interaction box
      x /= iBox.size[0];
      y /= iBox.size[1];

      // Uses the height and width of the canvas to scale
      // the x and y coordinates in a way that they 
      // take up the entire canvas
      x *= width;
      y *= height;

      // Returns the values, making sure to negate the sign 
      // of the y coordinate, because the y basis in canvas 
      // points down instead of up
      return [ x , -y ];

    }

    function onCircle( gesture ){

      /*
      
        Setting up our parameters
      
      */

      // First get the position using our leapToScene function
      var pos = leapToScene( gesture.center );

      // Assigning the radius
      var radius = gesture.radius;

      var clockwise = false;

      if( gesture.normal[2]  <= 0 ){

        clockwise = true;

      }

      /*
      
        Setting up our drawing style

      */

      // Setting up the style for the stroke, and fill
      /*c.fillStyle   = "#39AECF";
      c.strokeStyle = "#39AECF";
      c.lineWidth   = 5;


      // Creating the path for the finger circle
      c.beginPath();

      // Draw a full circle of radius 6 at the finger position
      c.arc(pos[0], pos[1], radius, 0, Math.PI*2); 

      c.closePath();
       */
      //if( clockwise )
        //c.stroke();
    
        //c.fill();
}
   


    function onSwipe( gesture ){


       var startPos = leapToScene( gesture.startPosition );
       var pos = leapToScene( gesture.position);

       unmodstartPos = gesture.startPosition;
       unmodendPos = gesture.position;

       unmodDeltaY = Math.abs(gesture.startPosition[1] - gesture.position[1]);
       unmodDeltaX = Math.abs(gesture.startPosition[0] - gesture.position[0]);

      if (unmodDeltaY > unmodDeltaX)
      {   
      if (pos[1] > startPos[1])
         $('#pan img').panZoom( 'zoomIn');
      else if(pos[1] < startPos[1])
         $('#pan img').panZoom( 'zoomOut');
      }
      else
      {  
      if(pos[0] > startPos[0])
          $('#pan img').panZoom( 'panRight');
      else if(pos[0] < startPos[0])
          $('#pan img').panZoom( 'panLeft');  
      }



  }


    function onKeyTap( gesture ){

      var pos  = leapToScene( gesture.position );
    
      var time = frame.timestamp;

      // keyTaps.push( [ pos[0] , pos[1] , time ] );
    
   //$('#pan img').panZoom( 'zoomOut');

    }

     function onNextImage( gesture ){

        $('#pan img').attr('src', images[currentImage]);

    }
    function onPrevImage( gesture ){

        $('#pan img').attr('src', images[currentImage]);

    }

    function onRefresh( hand ){
        console.log("The number of fingers is " + hand.pointables.length);

        if(hand.pointables.length == 1)
        {
          console.log("Refreshed!");
          //$( "#destroy" ).trigger( "click" );
          //$( "#reinit" ).trigger( "click" );
          $('#pan img').panZoom( 'fit');  
        }
    }


    function updateKeyTaps(){

      for( var i = 0; i < keyTaps.length; i++ ){

        var keyTap = keyTaps[i];
        var age = frame.timestamp - keyTaps[i][2];
        age /= 1000000;

        if( age >= KEYTAP_LIFETIME ){
          keyTaps.splice( i , 1 );
        }

      }

    }


    function drawKeyTaps(){

      for( var i = 0; i < keyTaps.length; i++ ){

        var keyTap = keyTaps[i];

        var x = keyTap[0];
        var y = keyTap[1];

        var age = frame.timestamp - keyTap[2];
        age /= 1000000;

        var completion = age / KEYTAP_LIFETIME;
        var timeLeft = 1 - completion;


        /*
        
          Static Ring

        
        c.strokeStyle = "#FF2300";
        c.lineWidth   = 3;
        
        c.beginPath();
        c.arc( x , y , KEYTAP_START_SIZE , 0 , Math.PI*2); 
        c.closePath();
        c.stroke();



        var opacity = timeLeft;
        var radius = KEYTAP_START_SIZE * timeLeft;
        //console.log( opacity );

        c.fillStyle = "rgba( 256 , 33 , 0 , " + opacity + ")";

        // Creating the path for the finger circle
        c.beginPath();
        c.arc( x , y , radius , 0 , Math.PI*2); 
        c.closePath();
        c.fill();        
        */
      }

    }

    function onScreenTap( gesture ){

      var pos  = leapToScene( gesture.position );
    
      var time = frame.timestamp;

      screenTaps.push( [ pos[0] , pos[1] , time ] );

    }

    function updateScreenTaps(){

      for( var i = 0; i < screenTaps.length; i++ ){

        var screenTap = screenTaps[i];
        var age = frame.timestamp - screenTaps[i][2];
        age /= 1000000;

        if( age >= SCREENTAP_LIFETIME ){
          screenTaps.splice( i , 1 );
        }

      }

    }

    function drawScreenTaps(){

      for( var i = 0; i < screenTaps.length; i++ ){

        var screenTap = screenTaps[i];

        var x = screenTap[0];
        var y = screenTap[1];

        var age = frame.timestamp - screenTap[2];
        age /= 1000000;

        var completion = age / SCREENTAP_LIFETIME;
        var timeLeft = 1 - completion;

        /*
        
        Drawing the static ring

        
        c.strokeStyle = "#FFB300";
        c.lineWidth   = 3;

        // Save the canvas context, so that we can restore it
        // and have it un affected
        c.save();

        // Translate the contex and rotate around the
        // center of the  square
        c.translate( x , y );

        //Starting x and y ( compared to the pivot point )
        var left = -SCREENTAP_START_SIZE / 2;
        var top = -SCREENTAP_START_SIZE / 2;
        var width = SCREENTAP_START_SIZE;
        var height = SCREENTAP_START_SIZE;

        // Draw the rectangle
        c.strokeRect( left , top , width , height );

        // Restore the context, so we don't draw everything rotated
        c.restore();


        // Drawing the non-static part

        var size = SCREENTAP_START_SIZE * timeLeft;
        var opacity =  timeLeft;
        var rotation = timeLeft * Math.PI;
        
        c.fillStyle = "rgba( 255 , 179 , 0 , " + opacity + ")";
    
        c.save();

        c.translate( x , y );
        c.rotate( rotation );
        */


      }

    }

    // Creates our Leap Controller
    var controller = new Leap.Controller({enableGestures:true});
    circleTimes.push("0");
     var firstcircle = 1;
    // Tells the controller what to do every time it sees a frame
    controller.on( 'frame' , function( data ){
   

      // Assigning the data to the global frame object
      frame = data;

      for( var i = 0; i < frame.gestures.length; i++ ){


        
        var gesture = frame.gestures[i];
        //gestures.push(gesture.timestamp);


        var type = gesture.type;

        if (frame.hands.length > 0) {
          for (var k = 0; k < frame.hands.length; k++) {
            var hand = frame.hands[k];
            var normalDirec = hand.palmNormal[1];
            //console.log(handVec);
            console.log(hand.palmNormal);
          // var direct = hand.palmNormal().getY();

          //var direc = firstHand.palmNormal().getY;
          //alert(direc);


        if(frame.fingers.length != 1)
        {
          switch( type ){
          
          case "circle":
            if(firstcircle == 1)
            {
              circleTimes[0] = frame.timestamp;
              firstcircle = 0;
              onRefresh ( hand );
            }
            if(frame.timestamp - circleTimes[0] <= 1000000)
            {
              console.log("Initial time was " + circleTimes[0]);
              console.log("Cannot refresh so soon...  " + (frame.timestamp - circleTimes[0]));
              break;
            }
            else
            {
                circleTimes[0] = frame.timestamp; 
                onRefresh( hand );
            }
            
            
          case "swipe":
            onSwipe( gesture );
            break;
          
          case "screenTap":
            //console.log("That was a screentap");
            //onScreenTap( gesture );
            break;

               
            
   
        }
      }
      else
      {
        switch( type ){

          case "keyTap":
           
              console.log("Going to next picture, " + normalDirec);
              currentImage = (currentImage + 1) % images.length;
              onNextImage( gesture );
              break;

          case "screenTap":
            console.log("Going to previous picture, " + frame.gestures.length);
            currentImage = (currentImage + images.length - 1) % images.length;
            onPrevImage( gesture );
            break;   

          case "circle":
            if(firstcircle == 1)
            {
              circleTimes[0] = frame.timestamp;
              firstcircle = 0;
              onRefresh( hand );
            }
            if(frame.timestamp - circleTimes[0] <= 1000000)
            {
              console.log("Initial time was " + circleTimes[0]);
              console.log("Cannot refresh so soon...  " + (frame.timestamp - circleTimes[0]));
              break;
            }
            else
            {
                circleTimes[0] = frame.timestamp; 
                onRefresh( hand );
            }
            
        }

      }
      
    }
  }
      }

      updateKeyTaps();
      drawKeyTaps();

      updateScreenTaps();
      drawScreenTaps();


    });
    
    // Get frames rolling by connecting the controller
    controller.connect();


    </script>

       

        <!-- The JavaScript -->

        <script type="text/javascript">
            $(function() {

              var htmls = "";

        for(var g = 0; g < 3; g++)
        {
            htmls += "<div class=\"content\"><div><a href=\"#\"><img src=\""; 
            htmls += images[g]; 
            htmls += "\" alt=\"images/";
            htmls += g+1;
            htmls += ".jpg\" class=\"thumb\" /></a></div></div>";

          
        }
        console.log(htmls);
        $(".container").html(htmls);
        //current thumb's index being viewed
        var current     = -1;
        //cache some elements
        var $btn_thumbs = $('#fp_thumbtoggle');
        var $loader   = $('#fp_loading');
        var $btn_next   = $('#fp_next');
        var $btn_prev   = $('#fp_prev');
        var $thumbScroller  = $('#thumbScroller');
        
        //total number of thumbs
        var nmb_thumbs    = $thumbScroller.find('.content').length;
        
        //preload thumbs
        var cnt_thumbs    = 0;
        for(var i=0;i<nmb_thumbs;++i){
          var $thumb = $thumbScroller.find('.content:nth-child('+parseInt(i+1)+')');
          $('<img/>').load(function(){
            ++cnt_thumbs;
            if(cnt_thumbs == nmb_thumbs)
        //display the thumbs on the bottom of the page
        showThumbs(2000);
          }).attr('src',$thumb.find('img').attr('src'));
        }
        
        
        //make the document scrollable
        //when the the mouse is moved up/down
        //the user will be able to see the full image
        makeScrollable();
        
        //clicking on a thumb...
        $thumbScroller.find('.content').bind('click',function(e){
          var $content= $(this);
          var $elem   = $content.find('img');
          //keep track of the current clicked thumb
          //it will be used for the navigation arrows
          current   = $content.index()+1;
          //get the positions of the clicked thumb
          var pos_left  = $elem.offset().left;
          var pos_top   = $elem.offset().top;
          //clone the thumb and place
          //the clone on the top of it
          
          
          var windowW = $(window).width();
          var windowH = $(window).height();
          //animate the clone to the center of the page
          $clone.stop()
          .animate({
            'left': windowW/2 + 'px',
            'top': windowH/2 + 'px',
            'margin-left' :-$clone.width()/2 -5 + 'px',
            'margin-top': -$clone.height()/2 -5 + 'px'
          },500,
          function(){
            var $theClone   = $(this);
            var ratio   = $clone.width()/120;
            var final_w   = 400*ratio;
            
            
          
            
            
            //expand the clone when large image is loaded
            $('<img class="fp_preview"/>').load(function(){
              var $newimg     = $(this);
              var $currImage  = $('#fp_gallery').children('img:first');
              $newimg.insertBefore($currImage);

              //expand clone
              $theClone.animate({
                'opacity'   : 0,
                'top'     : windowH/2 + 'px',
                'left'      : windowW/2 + 'px',
                'margin-top'  : '-200px',
                'margin-left' : -final_w/2 + 'px',
                'width'     : final_w + 'px',
                'height'    : '400px'
              },1000,function(){$(this).remove();});
              //now we have two large images on the page
              //fadeOut the old one so that the new one gets shown
              $currImage.fadeOut(2000,function(){
                $(this).remove();
              });
              //show the navigation arrows
              showNav();
            }).attr('src',$elem.attr('alt'));
          });
          //hide the thumbs container
          hideThumbs();
          e.preventDefault();
        });
        
        //clicking on the "show thumbs"
        //displays the thumbs container and hides
        //the navigation arrows
        $btn_thumbs.bind('click',function(){
          showThumbs(500);
          hideNav();
        });
        
        function hideThumbs(){
          $('#outer_container').stop().animate({'bottom':'-160px'},500);
          showThumbsBtn();
        }

        function showThumbs(speed){
          $('#outer_container').stop().animate({'bottom':'0px'},speed);
          hideThumbsBtn();
        }
        
        function hideThumbsBtn(){
          $btn_thumbs.stop().animate({'bottom':'-50px'},500);
        }

        function showThumbsBtn(){
          $btn_thumbs.stop().animate({'bottom':'0px'},500);
        }

        function hideNav(){
          $btn_next.stop().animate({'right':'-50px'},500);
          $btn_prev.stop().animate({'left':'-50px'},500);
        }

        function showNav(){
          $btn_next.stop().animate({'right':'0px'},500);
          $btn_prev.stop().animate({'left':'0px'},500);
        }

        //events for navigating through the set of images
        $btn_next.bind('click',showNext);
        $btn_prev.bind('click',showPrev);
        
        //the aim is to load the new image,
        //place it before the old one and fadeOut the old one
        //we use the current variable to keep track which
        //image comes next / before
        function showNext(){
          ++current;
          var $e_next = $thumbScroller.find('.content:nth-child('+current+')');
          if($e_next.length == 0){
            current = 1;
            $e_next = $thumbScroller.find('.content:nth-child('+current+')');
          }
          
        }
        
        function showPrev(){
          --current;
          var $e_next = $thumbScroller.find('.content:nth-child('+current+')');
          if($e_next.length == 0){
            current = nmb_thumbs;
            $e_next = $thumbScroller.find('.content:nth-child('+current+')');
          }
        
        }
        
                function makeScrollable(){
          $(document).bind('mousemove',function(e){
            var top = (e.pageY - $(document).scrollTop()/2) ;
            $(document).scrollTop(top);
                    });
        }});
          

               
            
        </script>


  </body>
</html>
